(this.webpackJsonpwexchange=this.webpackJsonpwexchange||[]).push([[97],{1232:function(e,t,a){"use strict";a.d(t,"c",(function(){return l})),a.d(t,"d",(function(){return c})),a.d(t,"b",(function(){return s})),a.d(t,"a",(function(){return i})),a.d(t,"e",(function(){return m}));var n=a(12),r=a.n(n),l=function(){return r.a.get("/api/invoices/all")},c=function(e){return r.a.get("/api/invoices",{data:e})},s=function(e){return r.a.post("/api/invoices/delete",e)},i=function(e){return r.a.post("/api/invoices/add",e)},m=function(e){return r.a.post("/api/invoices/update",e)}},2395:function(e,t,a){"use strict";a.r(t);var n=a(20),r=a(24),l=a(27),c=a(26),s=a(0),i=a.n(s),m=a(316),o=a(1),d=a(891),u=a(37),p=a(1232),E=a(1239),v=a(17),h=function(e){Object(l.a)(a,e);var t=Object(c.a)(a);function a(){var e;Object(n.a)(this,a);for(var r=arguments.length,l=new Array(r),c=0;c<r;c++)l[c]=arguments[c];return(e=t.call.apply(t,[this].concat(l))).state={},e.subTotalCost=0,e}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var e=this;Object(p.d)(this.props.match.params.id).then((function(t){e.setState(Object(o.a)({},t.data))}))}},{key:"render",value:function(){var e=this;this.subTotalCost=0;var t=this.state,a=t.orderNo,n=t.buyer,r=t.seller,l=t.item,c=void 0===l?[]:l,s=t.status,m=t.vat,o=t.date;return i.a.createElement("div",{className:"invoice-viewer py-16"},i.a.createElement("div",{className:"viewer_actions px-3 mb-3 d-flex align-items-center justify-content-between"},i.a.createElement(u.a,{to:"/invoice/list"},i.a.createElement("i",{className:"i-Left1 text-20 font-weight-700"}," ")),i.a.createElement("div",null,i.a.createElement(d.a,{className:"mr-3 py-2",variant:"primary",onClick:function(){return e.props.toggleInvoiceEditor()}},"Edit Invoice"),i.a.createElement(d.a,{onClick:function(){return window.print()},className:"py-2",variant:"warning"},"Print Invoice"))),i.a.createElement("div",{id:"print-area",className:"px-3"},i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-md-6"},i.a.createElement("h4",{className:"font-weight-bold"},"Order Info"),i.a.createElement("p",null,"#",a)),i.a.createElement("div",{className:"col-md-6 text-sm-right"},i.a.createElement("p",{className:"text-capitalize"},i.a.createElement("strong",null,"Order status:")," ",s),i.a.createElement("p",null,i.a.createElement("strong",null,"Order date: "),i.a.createElement("span",null,o?Object(E.default)(new Date(o).getTime(),"MMMM dd, yyyy"):"")))),i.a.createElement("div",{className:"mt-3 mb-4 border-top"}),i.a.createElement("div",{className:"row mb-5"},i.a.createElement("div",{className:"col-md-6 mb-3 mb-sm-0"},i.a.createElement("h5",{className:"font-weight-bold"},"Bill From"),i.a.createElement("p",null,r?r.name:null),i.a.createElement("span",{className:"white-space-pre-line"},r?r.address:null)),i.a.createElement("div",{className:"col-md-6 text-sm-right"},i.a.createElement("h5",{className:"font-weight-bold"},"Bill To"),i.a.createElement("p",null,n?n.name:null),i.a.createElement("span",{className:"white-space-pre-line"},n?n.address:null))),i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-md-12 table-responsive"},i.a.createElement("table",{className:"table table-hover mb-4"},i.a.createElement("thead",{className:"bg-gray-300"},i.a.createElement("tr",null,i.a.createElement("th",{scope:"col"},"#"),i.a.createElement("th",{scope:"col"},"Item Name"),i.a.createElement("th",{scope:"col"},"Unit Price"),i.a.createElement("th",{scope:"col"},"Unit"),i.a.createElement("th",{scope:"col"},"Cost"))),i.a.createElement("tbody",null,c.map((function(t,a){return e.subTotalCost+=t.unit*t.price,i.a.createElement("tr",{key:a},i.a.createElement("td",{className:"text-capitalize"},a+1),i.a.createElement("td",{className:"text-capitalize"},t.name),i.a.createElement("td",{className:"text-capitalize"},t.price),i.a.createElement("td",{className:"text-capitalize"},t.unit),i.a.createElement("td",null,t.unit*t.price))}))))),i.a.createElement("div",{className:"col-md-12"},i.a.createElement("div",{className:"invoice-summary"},i.a.createElement("p",null,"Sub total: ",i.a.createElement("span",null,"$",this.subTotalCost)),i.a.createElement("p",null,"Vat(%): ",i.a.createElement("span",null,m)),i.a.createElement("h5",{className:"font-weight-bold"},"Grand Total:",i.a.createElement("span",null,"$",this.subTotalCost+=this.subTotalCost*m/100)))))))}}]),a}(s.Component),b=Object(v.g)(h),g=a(969),N=a(888),y=a(896),f=a(889),w=a(863),I=a(1038),C=a.n(I),x=a(862),j=function(e){Object(l.a)(a,e);var t=Object(c.a)(a);function a(){var e;Object(n.a)(this,a);for(var r=arguments.length,l=new Array(r),c=0;c<r;c++)l[c]=arguments[c];return(e=t.call.apply(t,[this].concat(l))).state={id:"",orderNo:"",buyer:{name:"",address:""},seller:{name:"",address:""},item:[],status:"",vat:"",date:new Date,currency:"$",loading:!1},e.subTotalCost=0,e.generateRandomId=function(){var t=Math.random().toString(),a=t.substr(2,t.length-1);e.setState({id:a})},e.handleSubmit=function(t,a){var n=a.setSubmitting,r=e.state.id;e.setState({loading:!0}),n(!0),console.log(t),e.props.isNewInvoice?Object(p.a)(Object(o.a)({id:r},t)).then((function(){e.setState({loading:!1}),e.props.history.push("/invoice/".concat(r)),e.props.toggleInvoiceEditor()})):Object(p.e)(t).then((function(){e.setState({loading:!1}),e.props.toggleInvoiceEditor()}))},e.calculateSubTotal=function(t){e.subTotalCost=t.item.reduce((function(e,t){return e+t.price*t.unit}),0)},e}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.props.isNewInvoice?this.generateRandomId():Object(p.d)(this.props.match.params.id).then((function(t){e.setState(Object(o.a)({},t.data))}))}},{key:"render",value:function(){var e=this;this.subTotalCost=0;var t=this.state.loading;return i.a.createElement("div",{className:"invoice-viewer py-3"},i.a.createElement(w.b,{initialValues:this.state,validationSchema:O,onSubmit:this.handleSubmit,enableReinitialize:!0},(function(a){var n=a.values,r=a.errors,l=a.touched,c=a.handleChange,m=a.handleBlur,o=a.handleSubmit,u=(a.isSubmitting,a.setSubmitting,a.setFieldValue);return e.calculateSubTotal(n),i.a.createElement(s.Fragment,null,i.a.createElement(g.a,{onSubmit:o,className:"px-3"},i.a.createElement("div",{className:"viewer_actions d-flex justify-content-end"},i.a.createElement("div",{className:"mb-4"},i.a.createElement(d.a,{type:"button",className:"mr-3 py-2",variant:"warning",onClick:function(){return e.props.toggleInvoiceEditor()}},"Cancel"),i.a.createElement(d.a,{type:"submit",className:"py-2",variant:"primary",disabled:t},"Save"))),i.a.createElement("div",{className:"row justify-content-between"},i.a.createElement("div",{className:"col-md-6"},i.a.createElement("h4",{className:"font-weight-bold"},"Order Info"),i.a.createElement(N.a,{className:"col-sm-4 mb-3 pl-0"},i.a.createElement(y.a,null,"Order Number"),i.a.createElement(f.a,{type:"text",className:"form-control",name:"orderNo",placeholder:"Enter order number",onChange:c,onBlur:m,isInvalid:r.orderNo&&l.orderNo,value:n.orderNo}))),i.a.createElement("div",{className:"col-md-3 text-right"},i.a.createElement("label",{className:"d-block text-12 text-muted"},"Order Status"),i.a.createElement("div",{className:"pr-0 mb-4"},i.a.createElement("fieldset",{className:"offset-md-6"},i.a.createElement("label",{className:"radio radio-danger"},i.a.createElement("input",{type:"radio",name:"status",checked:"pending"===n.status,onChange:c,value:"pending"}),i.a.createElement("span",null,"Pending"),i.a.createElement("span",{className:"checkmark"})),i.a.createElement("label",{className:"radio check-reverse radio-warning"},i.a.createElement("input",{type:"radio",name:"status",checked:"processing"===n.status,onChange:c,value:"processing"}),i.a.createElement("span",null,"Processing"),i.a.createElement("span",{className:"checkmark"})),i.a.createElement("label",{className:"radio radio-success"},i.a.createElement("input",{type:"radio",name:"status",checked:"delivered"===n.status,onChange:c,value:"delivered"}),i.a.createElement("span",null,"Delivered"),i.a.createElement("span",{className:"checkmark"}))),r.status&&l.status&&i.a.createElement("small",{className:"text-danger"},"Minimum 1 item is required")),i.a.createElement("div",{className:"form-group mb-3"},i.a.createElement("div",{className:"mb-1"},"Order Date"),i.a.createElement(C.a,{className:"form-control text-right",dateFormat:"dd/MM/yyyy",selected:new Date(n.date),onChange:function(e){u("date",e)}})))),i.a.createElement("div",{className:"mt-3 mb-4 border-top"}),i.a.createElement("div",{className:"row mb-5"},i.a.createElement("div",{className:"col-md-6"},i.a.createElement("h5",{className:"font-weight-bold"},"Bill From"),i.a.createElement(N.a,{className:"col-md-10 mb-3 pl-0"},i.a.createElement(f.a,{type:"text",className:"form-control",name:"seller.name",placeholder:"Bill From",value:n.seller.name,onChange:c,onBlur:m,isInvalid:r.seller&&r.seller.name&&l.seller&&l.seller.name})),i.a.createElement(N.a,{className:"col-md-10 mb-3 pl-0"},i.a.createElement(f.a,{as:"textarea",placeholder:"Bill From Address",name:"seller.address",value:n.seller.address,onChange:c,onBlur:m,isInvalid:r.seller&&l.seller&&r.seller.address&&l.seller.address}))),i.a.createElement("div",{className:"col-md-6 text-right"},i.a.createElement("h5",{className:"font-weight-bold"},"Bill To"),i.a.createElement(N.a,{className:"col-md-10 offset-md-2 mb-3 pr-0"},i.a.createElement(f.a,{type:"text",className:"text-right",name:"buyer.name",placeholder:"Bill From",value:n.buyer.name,onChange:c,onBlur:m,isInvalid:r.buyer&&l.buyer&&r.buyer.name&&l.buyer.name})),i.a.createElement(N.a,{className:"col-md-10 offset-md-2 mb-3 pr-0"},i.a.createElement(f.a,{as:"textarea",className:"text-right",placeholder:"Bill From Address",name:"buyer.address",value:n.buyer.address,onChange:c,onBlur:m,isInvalid:r.buyer&&l.buyer&&r.buyer.address&&l.buyer.address})))),i.a.createElement("div",{className:"row"},i.a.createElement(w.a,{name:"item"},(function(e){return i.a.createElement("div",{className:"col-md-12 table-responsive"},i.a.createElement("table",{className:"table table-hover mb-3"},i.a.createElement("thead",{className:"bg-gray-300"},i.a.createElement("tr",null,i.a.createElement("th",{scope:"col"},"#"),i.a.createElement("th",{scope:"col"},"Item Name"),i.a.createElement("th",{scope:"col"},"Unit Price"),i.a.createElement("th",{scope:"col"},"Unit"),i.a.createElement("th",{scope:"col"},"Cost"),i.a.createElement("th",{scope:"col"}))),i.a.createElement("tbody",null,n.item.map((function(t,a){return i.a.createElement("tr",{key:a},i.a.createElement("th",{className:"text-middle",scope:"row"},a+1),i.a.createElement("td",null,i.a.createElement(f.a,{value:n.item[a].name,name:"item[".concat(a,"].name"),type:"text",placeholder:"Item Name",onChange:c,onBlur:m,isInvalid:r.item&&l.item&&r.item[a]&&l.item[a]&&r.item[a].name&&l.item[a].name})),i.a.createElement("td",null,i.a.createElement(f.a,{value:n.item[a].price,name:"item[".concat(a,"].price"),type:"number",placeholder:"Unit Price",onChange:c,onBlur:m,isInvalid:r.item&&l.item&&r.item[a]&&l.item[a]&&r.item[a].price&&l.item[a].price})),i.a.createElement("td",null,i.a.createElement(f.a,{value:n.item[a].unit,name:"item[".concat(a,"].unit"),type:"number",placeholder:"Unit",onChange:c,onBlur:m,isInvalid:r.item&&l.item&&r.item[a]&&l.item[a]&&r.item[a].unit&&l.item[a].unit})),i.a.createElement("td",{className:"text-middle"},n.item[a].price*n.item[a].unit),i.a.createElement("td",null,i.a.createElement("button",{type:"button",onClick:function(){return e.remove(a)},className:"btn btn-outline-secondary float-right"},"Delete")))})))),0===n.item.length&&i.a.createElement("small",{className:"text-danger"},"Minimum 1 item is required"),i.a.createElement("button",{type:"button",onClick:function(){return e.push({name:"",price:"",unit:""})},className:"btn btn-primary float-right mb-4"},"Add Item"))})),i.a.createElement("div",{className:"col-md-12"},i.a.createElement("div",{className:"invoice-summary invoice-summary-input float-right"},i.a.createElement("p",null,"Sub total:",i.a.createElement("span",null,n.currency,e.subTotalCost)),i.a.createElement("p",{className:"d-flex align-items-center"},"Vat(%):",i.a.createElement("span",null,i.a.createElement(f.a,{type:"text",className:"small-input",name:"vat",value:n.vat,onChange:c,onBlur:m,isInvalid:r.vat&&l.vat}),n.currency,e.subTotalCost*n.vat/100)),i.a.createElement("h5",{className:"font-weight-bold d-flex align-items-center"},"Grand Total:",i.a.createElement("span",null,i.a.createElement(f.a,{type:"text",className:"small-input",name:"currency",value:n.currency,onChange:c,onBlur:m,isInvalid:r.currency&&l.currency}),n.currency,e.subTotalCost+e.subTotalCost*n.vat/100)))))))})))}}]),a}(s.Component),O=x.object().shape({orderNo:x.string().required("orderNo is required"),status:x.string().required("status is required"),seller:x.object().shape({name:x.string().required("name is required"),address:x.string().required("address is required")}),buyer:x.object().shape({name:x.string().required("name is required"),address:x.string().required("address is required")}),item:x.array().of(x.object().shape({name:x.string().required("name is required"),price:x.number().required("price is required"),unit:x.number().required("unit is required")})).min(1,"Minimum 1 item is required"),vat:x.number().required("unit is required"),currency:x.string().required("name is required")}),k=Object(v.g)(j),q=function(e){Object(l.a)(a,e);var t=Object(c.a)(a);function a(){var e;Object(n.a)(this,a);for(var r=arguments.length,l=new Array(r),c=0;c<r;c++)l[c]=arguments[c];return(e=t.call.apply(t,[this].concat(l))).state={showInvoiceEditor:!1,isNewInvoice:!1},e.toggleInvoiceEditor=function(){e.setState({showInvoiceEditor:!e.state.showInvoiceEditor,isNewInvoice:!1})},e}return Object(r.a)(a,[{key:"componentDidMount",value:function(){"create"===this.props.match.params.id&&this.setState({showInvoiceEditor:!0,isNewInvoice:!0})}},{key:"render",value:function(){return i.a.createElement(m.a,{elevation:6,className:"invoice-details m-sm-30"},this.state.showInvoiceEditor?i.a.createElement(k,{toggleInvoiceEditor:this.toggleInvoiceEditor,isNewInvoice:this.state.isNewInvoice}):i.a.createElement(b,{toggleInvoiceEditor:this.toggleInvoiceEditor}))}}]),a}(s.Component);t.default=q}}]);
//# sourceMappingURL=97.ec719183.chunk.js.map