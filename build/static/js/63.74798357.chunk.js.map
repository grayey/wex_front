{"version":3,"sources":["app/views/products/productSearchResult.jsx","app/appNotifications.jsx","app/environment/environment.js","app/services/apiService.js","app/services/bidService.js","app/appConstants.js","app/appWidgets.jsx"],"names":["ProductSearchResult","props","mapOptions","container","zoom","useEffect","RenderMap","className","style","height","id","AppNotification","notificationType","type","timeOut","message","msg","title","NotificationManager","env","process","app_mode","trim","console","log","APP_ENVIRONMENT","development","base_url","websocket_url","base_url_front","paystack_api_key","mapbox_token","production","BASE_URL","get","url","a","data","path","extractDataAsParam","axios","then","response","jsonData","catch","error","requestStatus","statusCode","post","errorResponse","put","patch","del","delete","postFile","file","Object","keys","length","dataParams","appendment","key","BidService","getAllBidsBBuyerId","authUserId","apiService","getWalletByUserId","createTransactionAndUpdateWallet","bidData","bid","idOrSlug","_id","status","this","updateBid","ratingData","updateId","method","BID_STAGES","BID_INIT","OWNER_ACCEPT","BUYER_PAYS","PRODUCT_ENROUTE","PRODUCT_DELIVERED","RECEPTION_CONFIRMED","SELLER_IS_PAID","BID_STAGE_PERCENTAGES","BID_STAGE_TEXT","SALE_COMPLETE","BID_STAGE_SELLER_INPUTS","value","label","BID_STAGE_BUYER_INPUTS","BID_MOVEMENT_MESSAGES","mainText","subText","finalText","CANCEL","bidService","Mapbox","FetchingRecords","isFetching","emptyMsg","CustomProgressBar","bidStage","stage","bidPercentage","barText","rejection_type","variant","ongoing","barAttributes","now","striped","animated","ProgressBar","BidStageInput","authUser","setBid","user_type","onChange","event","preventDefault","target","swal","fire","text","icon","showCancelButton","confirmButtonColor","cancelButtonColor","confirmButtonText","cancelButtonText","result","bidResponse","err","BidMarqueeSummary","bids","noOfBids","allPrices","allQuantities","forEach","push","price_per_kg","quantity","minPrice","Math","min","maxPrice","max","marqueeMsg","checkSummary","BidRatingSummary","fullReview","review","rating","comment","Stars","initialRating","fractions","emptySymbol","size","fullSymbol"],"mappings":"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","file":"static/js/63.74798357.chunk.js","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { APP_ENVIRONMENT } from \"../../environment/environment\";\r\nimport { RenderMap } from \"../../appWidgets\";\r\n\r\nconst mapBoxId = \"MAP_BOX\";\r\n\r\nconst ProductSearchResult = (props) => {\r\n  const mapOptions = {\r\n    container: mapBoxId,\r\n    zoom: 200,\r\n  };\r\n\r\n  useEffect(() => {\r\n    const mapBox = RenderMap(mapOptions);\r\n  }, []);\r\n  return (\r\n    <>\r\n      <div className=\"row\">\r\n        <div className=\"col-6\">\r\n          <div>Product search result page</div>\r\n        </div>\r\n        <div className=\"col-6\">\r\n          <div style={{ height: \"100vh\" }} id={mapBoxId}></div>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default ProductSearchResult;\r\n","import {\r\n    NotificationManager\r\n  } from \"react-notifications\";\r\n\r\n\r\nexport default class AppNotification {\r\n    constructor(props){\r\n        const notificationType = props.type;\r\n        const timeOut = props.timeOut || 10000;\r\n        const message = props.msg\r\n        const title = notificationType;\r\n          NotificationManager[notificationType](\r\n              message,\r\n              title,\r\n              timeOut\r\n            );\r\n        }\r\n\r\n\r\n        \r\n         \r\n  }\r\n\r\n   \r\n","const env = process.env.NODE_ENV;\r\nconst app_mode = env ? env.trim() : \"development\";\r\nconsole.log(\"env\", env, process.env)\r\n\r\nconst environment = {\r\n    development: {\r\n        base_url: 'http://localhost:5000/api',\r\n        websocket_url:'http://localhost:8000',\r\n        base_url_front: '',\r\n        paystack_api_key:'pk_test_18e1b66031dc64ef4cc27827419428bac31851e1',\r\n        mapbox_token:'pk.eyJ1IjoiZ3JheWV5LWVtbXMiLCJhIjoiY2txODMzb2ZoMGM3ZzJvb2FnN3FpM2dpdyJ9.cC6x5fEQGF3gDJtr6JLNwg'\r\n    },\r\n    production: {\r\n        base_url: 'https://c8c24ab41dee.ngrok.io/api',\r\n        websocket_url:'https://c5853d42c26c.ngrok.io',\r\n        base_url_front: '',\r\n        paystack_api_key:'pk_test_18e1b66031dc64ef4cc27827419428bac31851e1',\r\n        mapbox_token:'pk.eyJ1IjoiZ3JheWV5LWVtbXMiLCJhIjoiY2txODMzb2ZoMGM3ZzJvb2FnN3FpM2dpdyJ9.cC6x5fEQGF3gDJtr6JLNwg'\r\n    }\r\n\r\n}\r\n\r\nexport const APP_ENVIRONMENT = environment[app_mode];","import axios from \"axios\";\r\nimport { APP_ENVIRONMENT } from \"../environment/environment\";\r\nimport localStorageService from \"./localStorageService\";\r\n\r\nconst BASE_URL = APP_ENVIRONMENT.base_url;\r\n\r\nexport const get = async (url, id = null, data = {}) => {\r\n  let path = `${BASE_URL}/${url}`;\r\n  path = !id ? path : `${path}/${id}`;\r\n  path = extractDataAsParam(path, data);\r\n  return await axios\r\n    .get(path)\r\n    .then((response) => {\r\n      return response.data;\r\n    })\r\n    .then((jsonData) => {\r\n      return jsonData;\r\n    })\r\n    .catch((error) => {\r\n      const errorResponse = {\r\n        data: error,\r\n        message: error.message,\r\n        requestStatus: false,\r\n        statusCode: error,\r\n      };\r\n      throw errorResponse;\r\n    });\r\n};\r\n\r\nexport const post = async (url, data) => {\r\n  const path = `${BASE_URL}/${url}`;\r\n  return await axios\r\n    .post(path, data)\r\n    .then((response) => {\r\n      return response.data;\r\n    })\r\n    .catch((error) => {\r\n      const errorResponse = error.response;\r\n      console.log(errorResponse);\r\n      throw errorResponse;\r\n    });\r\n};\r\n\r\nexport const put = async (url, data = null) => {\r\n  const path = `${BASE_URL}/${url}`;\r\n  return await axios\r\n    .put(path, data)\r\n    .then((response) => {\r\n      return response.data;\r\n    })\r\n    .catch((error) => {\r\n      const errorResponse = error.response;\r\n      throw errorResponse;\r\n    });\r\n};\r\n\r\nexport const patch = async (url, data = null) => {\r\n  const path = `${BASE_URL}/${url}`;\r\n  return await axios\r\n    .patch(path, data)\r\n    .then((response) => {\r\n      return response.data;\r\n    })\r\n    .catch((error) => {\r\n      const errorResponse = error.response;\r\n      throw errorResponse;\r\n    });\r\n};\r\n\r\nexport const del = async (url) => {\r\n  const path = `${BASE_URL}/${url}`;\r\n  return await axios\r\n    .delete(path)\r\n    .then((response) => {\r\n      return response.data;\r\n    })\r\n    .catch((error) => {\r\n      const errorResponse = error.response;\r\n      throw errorResponse;\r\n    });\r\n};\r\n\r\nexport const postFile = async (url, file, data = null) => {\r\n  const path = extractDataAsParam(`${BASE_URL}/${url}`, data);\r\n  return await axios\r\n    .post(path, file, data)\r\n    .then((response) => {\r\n      return response.data;\r\n    })\r\n    .catch((error) => {\r\n      const errorResponse = error.response;\r\n      throw errorResponse;\r\n    });\r\n};\r\n\r\n// async function post(url, data) {\r\n//     return fetch(path).then(res => res.json()).catch(error => error.json());\r\n// }\r\n\r\n// async function put(url, data) {\r\n//     return fetch(path).then(res => res.json()).catch(error => error.json());\r\n// }\r\n\r\n// async function del(url) {\r\n//     return fetch(path).then(res => res.json()).catch(error => error.json());\r\n// }\r\n\r\nfunction extractDataAsParam(path, data = {}) {\r\n  if (Object.keys(data).length) {\r\n    let dataParams = \"?\";\r\n    let appendment = \"\";\r\n    for (let key in data) {\r\n      appendment += `${key}=${data[key]}&`;\r\n    }\r\n    path += `${dataParams}${appendment}`;\r\n  }\r\n  return path;\r\n}\r\n","import * as apiService from \"./apiService\";\r\n\r\nexport default class BidService {\r\n  constructor() {}\r\n\r\n\r\n  /**\r\n   *\r\n   * @param {*} bidData\r\n   * this method creates a new bid\r\n   */\r\n  async createBid(bidData) {\r\n    const url = \"bids/\";\r\n    return await apiService.post(url, bidData);\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @param {*} bid\r\n   * @param {*} id\r\n   * This method updates a bid\r\n   */\r\n  async updateBid(bid, id) {\r\n    const url = `bids/${id}/`;\r\n    return await apiService.put(url, bid);\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @param {*} bid\r\n   * @param {*} id\r\n   * This method updates a bid\r\n   */\r\n  async getBidById(idOrSlug) {\r\n    const url = `bids/${idOrSlug}/`;\r\n    return await apiService.get(url);\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @param {*} bid\r\n   * This method deletes a bid\r\n   */\r\n  async deleteBid(bid) {\r\n    const url = `bids/${bid._id}`;\r\n    return await apiService.del(url);\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @param {*} bid\r\n   * This method toggles a bid\r\n   */\r\n  async toggleBid(bid) {\r\n    bid.status = !bid.status;\r\n    return this.updateBid(bid, bid._id);\r\n  }\r\n\r\n   /**\r\n   *\r\n   * @param {*} bid\r\n   * This method saves a rating for a bid\r\n   */\r\n    async saveBidReview(ratingData, updateId='') {\r\n      const url = `reviews/${updateId}`;\r\n      const method = updateId ? 'put' : 'post';\r\n      return apiService[method](url, ratingData);\r\n    }\r\n\r\n\r\n\r\n  /**\r\n   * This method fetches a buyer's bids\r\n   * @param {*} authUserId \r\n   * @returns \r\n   */\r\n  getAllBidsBBuyerId =  async (authUserId) =>{\r\n    const url = `bids/user/${authUserId}/`;\r\n    return await apiService.get(url);\r\n  }\r\n\r\n  /**\r\n   * This method fetches a user's wallet information and transactions\r\n   * @param {*} authUserId \r\n   * @returns \r\n   */\r\n   getWalletByUserId =  async (authUserId) =>{\r\n    const url = `wallet-transactions/wallet/${authUserId}/`;\r\n    return await apiService.get(url);\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param {*} authUserId \r\n   * @param {*} data \r\n   * @returns \r\n   */\r\n  createTransactionAndUpdateWallet =  async (data) => {\r\n    const url = `wallet-transactions/`;\r\n    return await apiService.post(url, data);\r\n\r\n  }\r\n\r\n\r\n\r\n}\r\n","export const BID_STAGES = {\r\n    BID_INIT:\"OWNER_ACCEPT\",\r\n    OWNER_ACCEPT:\"BUYER_PAYS\",\r\n    BUYER_PAYS:\"PRODUCT_ENROUTE\",\r\n    PRODUCT_ENROUTE:\"PRODUCT_DELIVERED\",\r\n    PRODUCT_DELIVERED:\"RECEPTION_CONFIRMED\",\r\n    RECEPTION_CONFIRMED:\"SELLER_IS_PAID\",\r\n    SELLER_IS_PAID:\"SALE_COMPLETE\"\r\n}\r\n\r\nexport const BID_STAGE_PERCENTAGES = {\r\n    BID_INIT:\"20\",\r\n    OWNER_ACCEPT:\"30\",\r\n    BUYER_PAYS:\"50\",\r\n    PRODUCT_ENROUTE:\"60\",\r\n    PRODUCT_DELIVERED:\"70\",\r\n    RECEPTION_CONFIRMED:\"80\",\r\n    SELLER_IS_PAID:\"100\"\r\n    \r\n}\r\n\r\nexport const BID_STAGE_TEXT = {\r\n    OWNER_ACCEPT:\"Initiated. Awaiting acceptance\",\r\n    BUYER_PAYS:\"Accepted. Awaiting buyer's payment\",\r\n    PRODUCT_ENROUTE:\"Paid. Awaiting shipping\",\r\n    PRODUCT_DELIVERED:\"En route. Awaiting delivery\",\r\n    RECEPTION_CONFIRMED:\"Delivered. Awaiting confirmation\",\r\n    SELLER_IS_PAID:\"Confirmed. Awaiting pay transfer.\",\r\n    SALE_COMPLETE:\"Seller paid. Sale complete.\"\r\n\r\n}\r\n\r\n\r\nexport const BID_STAGE_SELLER_INPUTS = {\r\n    OWNER_ACCEPT:{\r\n        value:\"OWNER_ACCEPT\",\r\n        label:\"ACCEPT\"\r\n    },\r\n    PRODUCT_ENROUTE:{\r\n        value:\"PRODUCT_ENROUTE\",\r\n        label:\"PRODUCT ON THE WAY\"\r\n    },\r\n    PRODUCT_DELIVERED:{\r\n        value:\"PRODUCT_DELIVERED\",\r\n        label:\"PRODUCT DELIVERED\"\r\n    },\r\n}\r\n\r\nexport const BID_STAGE_BUYER_INPUTS = {\r\n    BUYER_PAYS:{\r\n        value:\"BUYER_PAYS\",\r\n        label:\"PAY\"\r\n    },\r\n    RECEPTION_CONFIRMED:{\r\n        value:\"RECEPTION_CONFIRMED\",\r\n        label:\"PRODUCT RECEIVED\"\r\n    },\r\n}\r\n\r\nexport const BID_MOVEMENT_MESSAGES = {\r\n    OWNER_ACCEPT:{\r\n        mainText:\"You are about to accept this bid\",\r\n        subText:\"Buyer can now make payment?\",\r\n        finalText:\"Bid accepted.\"\r\n    },\r\n    PRODUCT_ENROUTE:{\r\n        mainText:\"Confirming that the product is now on its way\",\r\n        subText:\"The buyer will be notified\",\r\n        finalText:\"Buyer has been notified.\"\r\n    },\r\n    PRODUCT_DELIVERED:{\r\n        mainText:\"Confirming that the product has now been delivered\",\r\n        subText:\"The buyer will have to confirm receipt.\",\r\n        finalText:\"Buyer has been notified.\"\r\n\r\n    },\r\n    BUYER_PAYS:{\r\n        mainText:\"You about to make payment\",\r\n        subText:\"The quantity will now be reserved for you.\",\r\n        finalText:\"Redirecting..\"\r\n\r\n    },\r\n    RECEPTION_CONFIRMED:{\r\n        mainText:\"Confirming that you have received the product\",\r\n        subText:\"The seller will now be paid.\",\r\n        finalText:\"Thank you.\"\r\n\r\n    },\r\n    CANCEL:{\r\n        mainText:\"You about to cancel this bid.\",\r\n        subText:\"You cannot revert this action.\",\r\n        finalText:\"Bid cancelled.\"\r\n\r\n    }\r\n\r\n}","import React, { useState, useEffect } from \"react\";\r\nimport * as Mapbox from \"mapbox-gl\";\r\nimport { APP_ENVIRONMENT } from \"./environment/environment\";\r\nimport { Dropdown, Modal, ProgressBar } from \"react-bootstrap\";\r\n\r\nimport {\r\n  BID_STAGES,\r\n  BID_STAGE_PERCENTAGES,\r\n  BID_STAGE_TEXT,\r\n  BID_STAGE_SELLER_INPUTS,\r\n  BID_STAGE_BUYER_INPUTS,\r\n  BID_MOVEMENT_MESSAGES,\r\n} from \"./appConstants\";\r\n\r\nimport Rating from \"react-rating\";\r\nimport {\r\n  MdStarBorder,\r\n  MdStar,\r\n  MdFavoriteBorder,\r\n  MdFavorite,\r\n} from \"react-icons/md\";\r\n\r\nimport AppNotification from \"app/appNotifications\";\r\nimport swal from \"sweetalert2\";\r\nimport BidService from \"app/services/bidService\";\r\n\r\nconst bidService = new BidService();\r\n\r\nMapbox.accessToken = APP_ENVIRONMENT.mapbox_token;\r\n\r\nexport const FetchingRecords = ({ isFetching, emptyMsg }) => {\r\n  return isFetching ? (\r\n    <>\r\n      <div className=\"text-center\">\r\n        <div className=\"loader-bubble loader-bubble-info m-5\"></div>\r\n        <div className=\"loader-bubble loader-bubble-light m-5\"></div>\r\n        <div className=\"loader-bubble loader-bubble-dark m-5\"></div>\r\n      </div>\r\n    </>\r\n  ) : (\r\n    <>\r\n      <div>{emptyMsg || \"No records found\"}</div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport const CustomProgressBar = ({ bid }) => {\r\n  const bidStage = BID_STAGES[bid.stage];\r\n  const bidPercentage = BID_STAGE_PERCENTAGES[bid.stage];\r\n  const barText = BID_STAGE_TEXT[bidStage];\r\n  const { rejection_type } = bid;\r\n  let variant = bidPercentage < 100 ? \"info_custom\" : \"success\";\r\n  const ongoing = rejection_type && rejection_type == \"NONE\";\r\n\r\n  // disabled color if discarded\r\n  variant = ongoing ? \"secondary_custom\" : variant;\r\n\r\n  const barAttributes = {\r\n    now: bidPercentage,\r\n    label: `${bidPercentage}%`,\r\n    variant,\r\n  };\r\n  if (ongoing) {\r\n    barAttributes.striped = true;\r\n    barAttributes.animated = true;\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <ProgressBar {...barAttributes}></ProgressBar>\r\n      <p className={`text-center`}>\r\n        <small>\r\n          <b>\r\n            <em>{barText}</em>\r\n          </b>\r\n        </small>\r\n      </p>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport const BidStageInput = ({ bid, authUser, setBid }) => {\r\n  const { user_type } = authUser;\r\n  const stageInputObject =\r\n    user_type == \"SELLER\"\r\n      ? BID_STAGE_SELLER_INPUTS\r\n      : user_type == \"BUYER\"\r\n      ? BID_STAGE_BUYER_INPUTS\r\n      : {};\r\n  const bidStage = BID_STAGES[bid.stage];\r\n  const { value, label } = stageInputObject[bidStage] || {};\r\n\r\n  /**\r\n   *\r\n   * @param {*} product\r\n   * This method moves a bid's stage\r\n   */\r\n  const moveBid = (event) => {\r\n    event.preventDefault();\r\n    const { value } = event.target;\r\n    if (!event.target.value) return;\r\n    let { mainText, subText, finalText } = BID_MOVEMENT_MESSAGES[value];\r\n\r\n    swal\r\n      .fire({\r\n        title: `<small>${mainText}</small>`,\r\n        text: `${subText}`,\r\n        icon: \"warning\",\r\n        type: \"question\",\r\n        showCancelButton: true,\r\n        confirmButtonColor: \"#007BFF\",\r\n        cancelButtonColor: \"#d33\",\r\n        confirmButtonText: \"Yes!\",\r\n        cancelButtonText: \"No\",\r\n      })\r\n      .then((result) => {\r\n        if (result.value) {\r\n          bid.stage = value;\r\n          bidService\r\n            .updateBid(bid, bid._id)\r\n            .then((bidResponse) => {\r\n              console.log({\r\n                bidResponse,\r\n              });\r\n              new AppNotification({\r\n                type: \"success\",\r\n                msg: finalText,\r\n              });\r\n              setBid(bid);\r\n            })\r\n            .catch((err) => {\r\n              new AppNotification({\r\n                type: \"error\",\r\n                msg: `An error occured`,\r\n              });\r\n            });\r\n        }\r\n      });\r\n  };\r\n\r\n  return (\r\n    <select className=\"form-control\" onChange={moveBid}>\r\n      <option value=\"\">Select</option>\r\n      {value && label && <option value={value}>{label}</option>}\r\n      <option value=\"CANCEL\" className=\"text-danger\">\r\n        Decline\r\n      </option>\r\n    </select>\r\n  );\r\n};\r\n\r\nexport const BidMarqueeSummary = ({ bids, authUser }) => {\r\n  const checkSummary = () => {\r\n    const noOfBids = bids.length;\r\n    const allPrices = [];\r\n    const allQuantities = [];\r\n    bids.forEach((bid) => {\r\n      allPrices.push(+bid.price_per_kg);\r\n      allQuantities.push(+bid.quantity);\r\n    });\r\n    const minPrice = Math.min(...allPrices);\r\n    const minQuantity = Math.min(...allQuantities);\r\n    const maxPrice = Math.max(...allPrices);\r\n    const maxQuantity = Math.max(...allPrices);\r\n    let marqueeMsg = `${noOfBids} bids on this stock at a `;\r\n    marqueeMsg +=\r\n      authUser.user_type == \"SELLER\"\r\n        ? `minimum price of NGN${minPrice}.`\r\n        : `maximum price of NGN${maxPrice}.`;\r\n    return marqueeMsg;\r\n  };\r\n\r\n  return (\r\n    bids.length > 0 &&\r\n    authUser && (\r\n      <marquee>\r\n        <em>\r\n          <b>{checkSummary()}</b>\r\n        </em>\r\n      </marquee>\r\n    )\r\n  );\r\n};\r\n\r\nexport const BidRatingSummary = ({ bid, fullReview }) => {\r\n  const { rating, comment } = bid.review\r\n    ? bid.review\r\n    : { rating: 0, comment: \"\" };\r\n  const Stars = () => (\r\n    <Rating\r\n      initialRating={rating}\r\n      fractions={2}\r\n      emptySymbol={<MdStarBorder size={22}></MdStarBorder>}\r\n      fullSymbol={<MdStar className=\"text-warning\" size={22}></MdStar>}\r\n      onChange={() => {\r\n        return;\r\n      }}\r\n    ></Rating>\r\n  );\r\n  return fullReview ? (\r\n    <div>\r\n      NAMMAMMAMA\r\n    </div>\r\n  ) : <Stars />;\r\n};\r\n\r\nexport const RenderMap = ({ container }) =>\r\n  new Mapbox.Map({ container, style: \"mapbox://styles/mapbox/streets-v11\" });\r\n"],"sourceRoot":""}